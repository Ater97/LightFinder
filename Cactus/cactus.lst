---------------------------------------------
PIC ASSEMBLER LISTING
Line    Address Opcode  Instruction
---------------------------------------------
0001    0000            
0002    0000            DATO  	EQU 0x21
0003    0000            COUNTY 	EQU 0x22
0004    0000            COUNTX 	EQU 0x23
0005    0000            LIMITY 	EQU 0x24
0006    0000            LIMITX 	EQU 0x25
0007    0000            P1	  	EQU 0x26
0008    0000            P2    	EQU 0x27
0009    0000            COUNTBETA EQU 0x28
0010    0000            LIMITBETA EQU 0x29
0011    0000            
0012    0000            VARMAXX	EQU	0x30
0013    0000            VARMAXY	EQU	0x31
0014    0000            VARPHOTOCELL EQU 0x32
0015    0000            TMPCELL EQU 0x33
0016    0000            TMPY    EQU 0x34
0017    0000            TMPX    EQU 0x35
0018    0000            TMPBETA EQU 0x36
0019    0000            VARMAXBETA  EQU 0x37
0020    0000            LIMITMAXX   EQU 0x38
0021    0000            LIMITMAXY   EQU 0x39
0022    0000            LIMITMAXBETA EQU 0x40
0023    0000            
0024    0000            varA    EQU 0x41
0025    0000            varB    EQU 0x42
0026    0000            varC    EQU 0x43
0027    0000            VARDISPLAY  EQU 0x44
0028    0000            cont    EQU 0x45 
0029    0000            ADC     EQU 0x46
0030    0000            CON     EQU 0X47
0031    0000            CON2    EQU 0X48
0032    0000            CON3    EQU 0X49
0033    0000            GROUPNUMBER	EQU 0x50
0034    0000            
0035    0000            waffles EQU 0x51
0036    0000            CounterC EQU 0X52
0037    0000            CounterB EQU 0X53
0038    0000            CounterA EQU 0X54
0039    0000            INICIO
0040    0000            
0041    0000            	ORG		0x00
0042    0000    2801    	GOTO	START
0043    0001            
0044    0001            START
0045    0001            	;1 = in        0  = out
0046    0001            	;BIT SET FILE
0047    0001    1683    	BSF 	STATUS, 5; COLOCAMOS EN S EL BIT 5 DE REG. ESTATUS
0048    0002    0186    	CLRF	TRISB
0049    0003    0188    	CLRF	TRISD   
0050    0004            	                    ;BIT CLEARE FILE
0051    0004    1283    	BCF		STATUS, RP0 ;TODOS LOS PINES DE B SON SALIDAS
0052    0005            
0053    0005    3000    	MOVLW	0x00
0054    0006    0086    	MOVWF 	PORTB  ; SET 0 TO ALL PORTS B
0055    0007    3000    	MOVLW	0x00
0056    0008    0088    	MOVWF 	PORTD  ; SET 0 TO ALL PORTS B
0057    0009    30E6    	MOVLW 	0xE6        ;NUMBER OF MOVES/STOPS IN Y, E6h = 230d
0058    000A    00A4    	MOVWF 	LIMITY 
0059    000B    3020    	MOVLW 	0x20        ;NUMBER OF MOVES IN X
0060    000C    00A5    	MOVWF 	LIMITX 
0061    000D    3010    	MOVLW	0x10	    ;NUMBER OF STOPS IN X, 10h = 16d
0062    000E    00A9    	MOVWF	LIMITBETA
0063    000F    20AC    	call 	CLEANY      ;SET COUNTERS TO 0
0064    0010    20AF    	call 	CLEANX
0065    0011    20B2    	call 	CLEANBETA
0066    0012    3000    	MOVLW	0x00
0067    0013    00B2    	MOVWF	VARPHOTOCELL
0068    0014            ;------------------------------------------------------------------------------
0069    0014                            ;CONFIGURATION FOR THE PHOTOCELL 
0070    0014    1283    	bcf STATUS,RP0 ;Ir banco 0
0071    0015    1303    	bcf STATUS,RP1
0072    0016    3041    	movlw b'01000001' ;A/D conversion Fosc/8
0073    0017    009F    	movwf ADCON0
0074    0018            	;     	     7     6     5    4    3    2       1 0
0075    0018            	; 1Fh ADCON0 ADCS1 ADCS0 CHS2 CHS1 CHS0 GO/DONE ? ADON
0076    0018    1683    	bsf STATUS,RP0 ;Ir banco 1
0077    0019    1303    	bcf STATUS,RP1
0078    001A    3007    	movlw b'00000111'
0079    001B    0081    	movwf OPTION_REG ;TMR0 preescaler, 1:156
0080    001C            	;                7    6      5    4    3   2   1   0 
0081    001C            	; 81h OPTION_REG RBPU INTEDG T0CS T0SE PSA PS2 PS1 PS0
0082    001C    300E    	movlw b'00001110' ;A/D Port AN0/RA0
0083    001D    009F    	movwf ADCON1
0084    001E            	;            7    6     5 4 3     2     1     0 
0085    001E            	; 9Fh ADCON1 ADFM ADCS2 ? ? PCFG3 PCFG2 PCFG1 PCFG0
0086    001E    1405    	bsf TRISA,0 ;RA0 linea de entrada para el ADC
0087    001F                	;Port A: display output
0088    001F    1085        	bcf	TRISA, 1
0089    0020    1105       	bcf	TRISA, 2
0090    0021    1185        	bcf	TRISA, 3
0091    0022    1205       	bcf	TRISA, 4
0092    0023    1285        	bcf	TRISA, 5
0093    0024    1009        	bcf	TRISE, 0
0094    0025    1089        	bcf	TRISE, 1
0095    0026    0186    	clrf TRISB
0096    0027    1283    	bcf STATUS,RP0 ;Ir banco 0
0097    0028    1303    	bcf STATUS,RP1
0098    0029            ;--------------------------------------------------------------------
0099    0029            ;--------------------------------------------------------------------
0100    0029            						;MAIN
0101    0029            MAIN:
0102    0029    202F        call    SEARCH      ;SEARCH BEST POINT
0103    002A    2038        call    MOVEGREATER ;GO TO BEST POINT
0104    002B            WAIT:   
0105    002B                ;DO STUFF
0106    002B                ;BTFSS	BUTTON
0107    002B    282B        GOTO    WAIT
0108    002C    2041        call    RESTART      ;RETURN TO ORIGINAL POSITION & CLEAN EVERYTHING
0109    002D    2829        GOTO    MAIN
0110    002E    29D7        GOTO    END
0111    002F            SEARCH:
0112    002F    2080    	call	LOOPX ; MOVE X AND Y
0113    0030    0AA8    	INCF	COUNTBETA,1
0114    0031    0829    	MOVF	LIMITBETA, W	
0115    0032    0228    	SUBWF	COUNTBETA, w
0116    0033    1D03    	BTFSS	STATUS,Z
0117    0034    282F    	GOTO	SEARCH
0118    0035    20B2    	call	CLEANBETA   ;CLEAN COUNTBETA
0119    0036    2079    	call 	LOOPBETAREVERSE    ;RETURN TO ORIGINAL POSITION
0120    0037    0008        RETURN
0121    0038            
0122    0038            ;------------------------------------------------------------------
0123    0038                                    ;MOVE TO GREATER
0124    0038            MOVEGREATER:
0125    0038    204B    	call	LOOPXMAX ; MOVE X 
0126    0039    0AA8    	INCF	COUNTBETA,1
0127    003A    0840    	MOVF	LIMITMAXBETA, W	
0128    003B    0228    	SUBWF	COUNTBETA, w
0129    003C    1D03    	BTFSS	STATUS,Z
0130    003D    2838    	GOTO	MOVEGREATER
0131    003E    2053        call	LOOPYMAX ; MOVE Y
0132    003F    20B2        call	CLEANBETA
0133    0040    0008        RETURN
0134    0041            
0135    0041            RESTART:
0136    0041    2044        call    LOOPMAXBETAREVERSE
0137    0042    205B        call 	LOOPYREVERSEMAX
0138    0043    0008        RETURN
0139    0044            
0140    0044            LOOPMAXBETAREVERSE:
0141    0044    2063    	call 	LOOPXREVERSEMAX
0142    0045            	
0143    0045    0AA8    	INCF	COUNTBETA,1
0144    0046    0840    	MOVF	LIMITMAXBETA, W	
0145    0047    0228    	SUBWF	COUNTBETA, w
0146    0048    1D03    	BTFSS	STATUS,Z
0147    0049    2844    	GOTO	LOOPMAXBETAREVERSE
0148    004A    0008        RETURN
0149    004B            
0150    004B            LOOPXMAX:
0151    004B    20B5    	call 	EJEX
0152    004C            
0153    004C            	;MOVE ON X
0154    004C    0AA3        INCF    COUNTX,1    
0155    004D    0838    	MOVF  	LIMITMAXX, w
0156    004E    0223    	SUBWF 	COUNTX,w
0157    004F    1D03    	BTFSS 	STATUS,Z ;CHECK COUNT < limitx
0158    0050    284B    	GOTO 	LOOPXMAX	; JUMP IF COUNT !=  limitx
0159    0051            	
0160    0051    20AF    	call 	CLEANX
0161    0052    0008    	RETURN
0162    0053            
0163    0053            LOOPYMAX:
0164    0053    20BA    	call 	EJEY
0165    0054            	;MOVE ON Y
0166    0054    0AA2        INCF    COUNTY,1 ;count++
0167    0055    0839    	MOVF  	LIMITMAXY, w
0168    0056    0222    	SUBWF 	COUNTY,w
0169    0057    1D03    	BTFSS 	STATUS,Z ;CHECK COUNT < limity
0170    0058    2853    	GOTO 	LOOPYMAX	; JUMP IF COUNT !=  limity
0171    0059            	;RESET  countY
0172    0059    20AC    	call 	CLEANY
0173    005A    0008    	return
0174    005B            
0175    005B            
0176    005B            LOOPYREVERSEMAX:
0177    005B    20BF    	call 	REVERSEEJEY
0178    005C    0AA2        INCF    COUNTY,1
0179    005D    0839    	MOVF  	LIMITMAXY, w
0180    005E    0222    	SUBWF 	COUNTY,w
0181    005F    1D03    	BTFSS 	STATUS,Z ;CHECK COUNT <32
0182    0060    285B    	GOTO 	LOOPYREVERSEMAX
0183    0061    20AC    	call 	CLEANY
0184    0062    0008    	RETURN
0185    0063            
0186    0063            LOOPXREVERSEMAX:
0187    0063    20C4    	call 	REVERSEEJEX
0188    0064    0AA3        INCF    COUNTX,1
0189    0065            	
0190    0065    0838    	MOVF  	LIMITMAXX, w
0191    0066    0223    	SUBWF 	COUNTX,w
0192    0067    1D03    	BTFSS 	STATUS,Z ;CHECK COUNT <32
0193    0068    2863    	GOTO 	LOOPXREVERSEMAX
0194    0069    20AF    	call 	CLEANX
0195    006A    0008    	RETURN
0196    006B            
0197    006B            ;-------------------------------------------------------------------
0198    006B            ;                   Photocell comparation
0199    006B            ;COMPARE:
0200    006B            	;goto 	GET_PHOTOCELL
0201    006B                ;TMPCELL = READ PHOTOCELL INF.
0202    006B                ;ASIGNAR A TMPCELL EL NUMERO EN LA ESCALA DE LUZ (0-9)
0203    006B            
0204    006B            	;result		carry zero (status)
0205    006B            	;positive     1		0
0206    006B            	;zero		  1		1
0207    006B            	;negative     0     0
0208    006B            COMPARE:
0209    006B    0832        MOVF    VARPHOTOCELL,W
0210    006C    0233        SUBWF   TMPCELL, W ; W = VARPHOTOVELL - TMPCELL 
0211    006D    1C03        BTFSS   STATUS, C   ;IF VARPHOTOCELL < TMPCELL ; c=0 if negative
0212    006E    2070        call    CHANGEPHOTOCELL   
0213    006F    288B    	goto 	DimeElGordito 
0214    0070                ;return
0215    0070            
0216    0070            CHANGEPHOTOCELL:
0217    0070    3033        MOVLW   TMPCELL
0218    0071    00B2        MOVWF   VARPHOTOCELL  ;PHOTOCELL =  TMPCELL
0219    0072    3034        MOVLW   TMPY
0220    0073    00B1        MOVWF   VARMAXY     ;VARMAXY = TMPY
0221    0074    3035        MOVLW   TMPX
0222    0075    00B0        MOVWF   VARMAXX     ;VARMAXX = TMPX
0223    0076    3036        MOVLW   TMPBETA
0224    0077    00B7        MOVWF   VARMAXBETA  ;VARMAXBETA = TMPBETA
0225    0078    0008        return 
0226    0079            
0227    0079            ;---------------------------------------------------------------------
0228    0079            ;                       LOOPS
0229    0079            LOOPBETAREVERSE:
0230    0079    209B    	call 	LOOPXREVERSE
0231    007A            	
0232    007A    0AA8    	INCF	COUNTBETA,1
0233    007B    0829    	MOVF	LIMITBETA, W	
0234    007C    0228    	SUBWF	COUNTBETA, w
0235    007D    1D03    	BTFSS	STATUS,Z
0236    007E    2879    	GOTO	LOOPBETAREVERSE
0237    007F    0008    	RETURN
0238    0080            
0239    0080            LOOPX: ; LOOP i <= LIMITX
0240    0080    20B5    	call 	EJEX
0241    0081            
0242    0081            	;MOVE ON X
0243    0081    0AA3        INCF    COUNTX,1
0244    0082    0825    	MOVF  	LIMITX, w
0245    0083    0223    	SUBWF 	COUNTX,w
0246    0084    1D03    	BTFSS 	STATUS,Z ;CHECK COUNT < limitx
0247    0085    2880    	GOTO 	LOOPX	; JUMP IF COUNT !=  limitx
0248    0086    2089    	call	LOOPY ; MOVE Y
0249    0087            
0250    0087    20AF    	call 	CLEANX
0251    0088    0008    	RETURN
0252    0089            
0253    0089            LOOPY: ;LOOP i <= LIMITY
0254    0089    20BA    	call 	EJEY
0255    008A            	;INSERT LOGIC COMPARE VALUE OF PHOTOCELL & SAVE IT
0256    008A                ;maybe add a delay here \o/
0257    008A                ;call    COMPARE
0258    008A    291D    	goto 	GET_PHOTOCELL
0259    008B            DimeElGordito:
0260    008B            
0261    008B            	;MOVE ON Y
0262    008B    0AA2        INCF    COUNTY,1
0263    008C    0824    	MOVF  	LIMITY, w
0264    008D    0222    	SUBWF 	COUNTY,w
0265    008E    1D03    	BTFSS 	STATUS,Z ;CHECK COUNT < limity
0266    008F    2889    	GOTO 	LOOPY	; JUMP IF COUNT !=  limity
0267    0090            	;RESET Y
0268    0090    20AC    	call 	CLEANY
0269    0091    2093    	call 	LOOPYREVERSE
0270    0092    0008    	return
0271    0093            
0272    0093            LOOPYREVERSE:
0273    0093    20BF    	call 	REVERSEEJEY
0274    0094    0AA2        INCF    COUNTY,1
0275    0095    0824    	MOVF  	LIMITY, w
0276    0096    0222    	SUBWF 	COUNTY,w
0277    0097    1D03    	BTFSS 	STATUS,Z ;CHECK COUNT <32
0278    0098    2893    	GOTO 	LOOPYREVERSE
0279    0099    20AC    	call 	CLEANY
0280    009A    0008    	RETURN
0281    009B            
0282    009B            LOOPXREVERSE:
0283    009B    20C4    	call 	REVERSEEJEX
0284    009C    0AA3        INCF    COUNTX,1
0285    009D    0825    	MOVF  	LIMITX, w
0286    009E    0223    	SUBWF 	COUNTX,w
0287    009F    1D03    	BTFSS 	STATUS,Z ;CHECK COUNT <32
0288    00A0    289B    	GOTO 	LOOPXREVERSE
0289    00A1    20AF    	call 	CLEANX
0290    00A2    0008    	RETURN
0291    00A3            ;-------------------------------------------------------------------
0292    00A3            ;						DELAYS
0293    00A3            Delay ; = 0.0001 seconds
0294    00A3            			;496 cycles
0295    00A3    30A5    	movlw	0xA5
0296    00A4    00A6    	movwf	p1
0297    00A5            Delay_0
0298    00A5    0BA6    	decfsz	p1, f
0299    00A6    28A5    	goto	Delay_0
0300    00A7            
0301    00A7            			;4 cycles (including call)
0302    00A7    0008    	return
0303    00A8            ;-------------------------------------------------------------------
0304    00A8            ;						UTILITIES
0305    00A8            MOVEVALUE:	
0306    00A8    20A3    	call 	DELAY
0307    00A9    0821    	MOVF	DATO, W  
0308    00AA    0086    	MOVWF	PORTB	
0309    00AB    0008    	RETURN
0310    00AC            CLEANY:
0311    00AC    3000    	MOVLW 	0x00  ;se asigna la literal a w (0x00)
0312    00AD    00A2    	MOVWF 	COUNTY ;muevo w a COUNT 
0313    00AE    0008    	RETURN
0314    00AF            CLEANX:
0315    00AF    3000    	MOVLW 	0x00  ;se asigna la literal a w (0x00)
0316    00B0    00A3    	MOVWF 	COUNTX ;muevo w a COUNT 
0317    00B1    0008    	RETURN
0318    00B2            CLEANBETA:
0319    00B2    3000    	MOVLW 	0x00  ;se asigna la literal a w (0x00)
0320    00B3    00A8    	MOVWF 	COUNTBETA ;muevo w a COUNT 
0321    00B4    0008    	RETURN
0322    00B5            EJEX:	
0323    00B5    20ED    	call	MV12
0324    00B6    20DD    	call	MV06
0325    00B7    20D1    	call	MV03
0326    00B8    20E9    	call	MV09
0327    00B9    0008    	RETURN
0328    00BA            EJEY:	
0329    00BA    2119    	call	MVY12
0330    00BB    2109    	call	MVY6
0331    00BC    20FD    	call	MVY3
0332    00BD    2115    	call	MVY9
0333    00BE    0008    	RETURN
0334    00BF            REVERSEEJEY:
0335    00BF            	;call 	DELAY
0336    00BF    2115    	call	MVY9
0337    00C0    20FD    	call	MVY3
0338    00C1    2109    	call	MVY6
0339    00C2    2119    	call	MVY12
0340    00C3    0008    	RETURN
0341    00C4            REVERSEEJEX:
0342    00C4    20E9    	call  	MV09
0343    00C5    20D1    	call	MV03
0344    00C6    20DD    	call	MV06
0345    00C7    20ED    	call	MV12
0346    00C8    0008    	RETURN
0347    00C9            
0348    00C9            MV01:	
0349    00C9    3001    	MOVLW	B'00000001'
0350    00CA    00A1    	MOVWF	DATO
0351    00CB    20A8    	call	MOVEVALUE
0352    00CC    0008    	RETURN
0353    00CD            
0354    00CD            MV02:
0355    00CD    3002    	MOVLW	B'00000010'
0356    00CE    00A1    	MOVWF	DATO
0357    00CF    20A8    	call	MOVEVALUE
0358    00D0    0008    	RETURN
0359    00D1            MV03:	
0360    00D1    3003    	MOVLW	B'00000011'
0361    00D2    00A1    	MOVWF	DATO
0362    00D3    20A8    	call	MOVEVALUE
0363    00D4    0008    	RETURN
0364    00D5            
0365    00D5            MV04:
0366    00D5    3004    	MOVLW	B'00000100'
0367    00D6    00A1    	MOVWF	DATO
0368    00D7    20A8    	call	MOVEVALUE
0369    00D8    0008    	RETURN
0370    00D9            MV05:
0371    00D9    3005    	MOVLW	B'00000101'
0372    00DA    00A1    	MOVWF	DATO
0373    00DB    20A8    	call	MOVEVALUE
0374    00DC    0008    	RETURN
0375    00DD            MV06:
0376    00DD    3006    	MOVLW	B'00000110'
0377    00DE    00A1    	MOVWF	DATO
0378    00DF    20A8    	call	MOVEVALUE
0379    00E0    0008    	RETURN
0380    00E1            MV07:
0381    00E1    3007    	MOVLW	B'00000111'
0382    00E2    00A1    	MOVWF	DATO
0383    00E3    20A8    	call	MOVEVALUE
0384    00E4    0008    	RETURN
0385    00E5            MV08:
0386    00E5    3008    	MOVLW	B'00001000'
0387    00E6    00A1    	MOVWF	DATO
0388    00E7    20A8    	call	MOVEVALUE
0389    00E8    0008    	RETURN
0390    00E9            MV09:
0391    00E9    3009    	MOVLW	B'00001001'
0392    00EA    00A1    	MOVWF	DATO
0393    00EB    20A8    	call	MOVEVALUE
0394    00EC    0008    	RETURN
0395    00ED            MV12:
0396    00ED    300C    	MOVLW	B'00001100'
0397    00EE    00A1    	MOVWF	DATO
0398    00EF    20A8    	call	MOVEVALUE
0399    00F0    0008    	RETURN
0400    00F1            MVy0:
0401    00F1    3000    	MOVLW	B'00000000'
0402    00F2    00A1    	MOVWF	DATO
0403    00F3    20A8    	call	MOVEVALUE
0404    00F4    0008    	RETURN
0405    00F5            MVY1:
0406    00F5    3010    	MOVLW	B'00010000'
0407    00F6    00A1    	MOVWF	DATO
0408    00F7    20A8    	call	MOVEVALUE
0409    00F8    0008    	RETURN
0410    00F9            MVY2:
0411    00F9    3020    	MOVLW	B'00100000'
0412    00FA    00A1    	MOVWF	DATO
0413    00FB    20A8    	call	MOVEVALUE
0414    00FC    0008    	RETURN
0415    00FD            MVY3:
0416    00FD    3030    	MOVLW	B'00110000'
0417    00FE    00A1    	MOVWF	DATO
0418    00FF    20A8    	call	MOVEVALUE
0419    0100    0008    	RETURN
0420    0101            MVY4:
0421    0101    3040    	MOVLW	B'01000000'
0422    0102    00A1    	MOVWF	DATO
0423    0103    20A8    	call	MOVEVALUE
0424    0104    0008    	RETURN
0425    0105            MVY5:
0426    0105    3050    	MOVLW	B'01010000'
0427    0106    00A1    	MOVWF	DATO
0428    0107    20A8    	call	MOVEVALUE
0429    0108    0008    	RETURN
0430    0109            MVY6:
0431    0109    3060    	MOVLW	B'01100000'
0432    010A    00A1    	MOVWF	DATO
0433    010B    20A8    	call	MOVEVALUE
0434    010C    0008    	RETURN
0435    010D            MVY7:
0436    010D    3070    	MOVLW	B'01110000'
0437    010E    00A1    	MOVWF	DATO
0438    010F    20A8    	call	MOVEVALUE
0439    0110    0008    	RETURN
0440    0111            MVY8:
0441    0111    3080    	MOVLW	B'10000000'
0442    0112    00A1    	MOVWF	DATO
0443    0113    20A8    	call	MOVEVALUE
0444    0114    0008    	RETURN
0445    0115            MVY9:
0446    0115    3090    	MOVLW	B'10010000'
0447    0116    00A1    	MOVWF	DATO
0448    0117    20A8    	call	MOVEVALUE
0449    0118    0008    	RETURN
0450    0119            MVY12:
0451    0119    30C0    	MOVLW	B'11000000'
0452    011A    00A1    	MOVWF	DATO
0453    011B    20A8    	call	MOVEVALUE
0454    011C    0008    	RETURN
0455    011D            ;-----------------------------------------------------------------
0456    011D            ;							PHOTOCELL
0457    011D            GET_PHOTOCELL:
0458    011D            _bucle:
0459    011D            	;btfss INTCON,T0IF
0460    011D            	;goto _bucle ;Esperar que el timer0 desborde
0461    011D            	; SE DEBE DE COLOCAR UN DELAY PARA QUE ESPERE LA CONVERSION
0462    011D    1503    	BSF  STATUS,Z
0463    011E    2176    	CALL _PRESPERA
0464    011F    110B    	bcf INTCON,T0IF ;Limpiar el indicador de desborde
0465    0120    151F    	bsf ADCON0,GO ;Comenzar conversion A/D
0466    0121            _espera:
0467    0121    191F    	btfsc ADCON0,GO ;ADCON0 es 0? (la conversion esta completa?)
0468    0122    2921    	goto _espera ;No, ir _espera
0469    0123    081E    	movf ADRESH,W ;Si, W=ADRESH
0470    0124            	; 1Eh ADRESH A/D Result Register High Byte
0471    0124            	; 9Eh ADRESL A/D Result Register Low Byte 
0472    0124    00C6    	movwf ADC ;ADC=W
0473    0125    0846    	movfw ADC ;W = ADC
0474    0126    292A        	goto  V1
0475    0127            returnExec:
0476    0127    3051        MOVLW  	waffles ;DATO of Photocell
0477    0128    00B3        MOVWF 	TMPCELL
0478    0129    286B    	goto COMPARE
0479    012A            
0480    012A            V1:
0481    012A    30D2        movlw D'210'
0482    012B    0246        subwf ADC, W
0483    012C    1C03        btfss STATUS, C
0484    012D    2932        goto V2
0485    012E    3000        movlw 0x0
0486    012F    00D1        movwf waffles
0487    0130    2187        call case0
0488    0131    2927        goto returnExec
0489    0132            
0490    0132            V2:
0491    0132    30C2        movlw D'194'
0492    0133    0246        subwf ADC, W
0493    0134    1C03        btfss STATUS, C
0494    0135    293A        goto V3
0495    0136    3001        movlw 0x1
0496    0137    00D1        movwf waffles
0497    0138    218F        call case1
0498    0139    2927        goto returnExec
0499    013A            
0500    013A            V3:
0501    013A    30AE        movlw D'174'
0502    013B    0246        subwf ADC, W
0503    013C    1C03        btfss STATUS, C
0504    013D    2942        goto V4
0505    013E    3002        movlw 0x2
0506    013F    00D1        movwf waffles
0507    0140    2197        call case2
0508    0141    2927        goto returnExec
0509    0142            
0510    0142            V4:
0511    0142    309E        movlw D'158'
0512    0143    0246        subwf ADC, W
0513    0144    1C03        btfss STATUS, C
0514    0145    294A        goto V5
0515    0146    3003        movlw 0x3
0516    0147    00D1        movwf waffles
0517    0148    219F        call case3
0518    0149    2927        goto returnExec
0519    014A            
0520    014A            V5:
0521    014A    308A        movlw D'138'
0522    014B    0246        subwf ADC, W
0523    014C    1C03        btfss STATUS, C
0524    014D    2952        goto V6
0525    014E    3004        movlw 0x4
0526    014F    00D1        movwf waffles
0527    0150    21A7        call case4
0528    0151    2927        goto returnExec
0529    0152            
0530    0152            V6:
0531    0152    3075        movlw D'117'
0532    0153    0246        subwf ADC, W
0533    0154    1C03        btfss STATUS, C
0534    0155    295A        goto V7
0535    0156    3005        movlw 0x5
0536    0157    00D1        movwf waffles
0537    0158    21AF        call case5
0538    0159    2927        goto returnExec
0539    015A            
0540    015A            V7:
0541    015A    3052        movlw D'82'
0542    015B    0246        subwf ADC, W
0543    015C    1C03        btfss STATUS, C
0544    015D    2962        goto V8
0545    015E    3006        movlw 0x6
0546    015F    00D1        movwf waffles
0547    0160    21B7        call case6
0548    0161    2927        goto returnExec
0549    0162            
0550    0162            V8:
0551    0162    3033        movlw D'51'
0552    0163    0246        subwf ADC, W
0553    0164    1C03        btfss STATUS, C
0554    0165    296A        goto V9
0555    0166    3007        movlw 0x7
0556    0167    00D1        movwf waffles
0557    0168    21BF        call case7
0558    0169    2927        goto returnExec
0559    016A            
0560    016A            V9:
0561    016A    301C        movlw D'28'
0562    016B    0246        subwf ADC, W
0563    016C    1C03        btfss STATUS, C
0564    016D    2972        goto V10
0565    016E    3008        movlw 0x8
0566    016F    00D1        movwf waffles
0567    0170    21C7        call case8
0568    0171    2927        goto returnExec
0569    0172            
0570    0172            V10:
0571    0172                ; movlw D'0'
0572    0172                ; subwf ADC, W
0573    0172                ; btfss STATUS, N
0574    0172                ; goto V10<--
0575    0172                ;btfsc STATUS, C
0576    0172    3009        movlw 0x9
0577    0173    00D1        movwf waffles
0578    0174    21CF        call case9
0579    0175    2927        goto returnExec
0580    0176            
0581    0176            _PRESPERA:
0582    0176    30FF    	MOVLW 0XFF
0583    0177    00D4    	MOVWF CounterA
0584    0178    00D3    	MOVWF COUNTERb
0585    0179    00D2    	MOVWF COUNTERc	
0586    017A    217C    	CALL ESPE
0587    017B    0008    	RETURN	
0588    017C            	
0589    017C            ESPE:
0590    017C    0BD4    	DECFSZ	CounterA,0X01
0591    017D    297C    	GOTO	ESPE
0592    017E    2180    	CALL	ESPE2
0593    017F    0008    	RETURN
0594    0180            ESPE2:
0595    0180    0BD3    	DECFSZ	COUNTERb,0X01
0596    0181    2980    	GOTO	ESPE2
0597    0182    2184    	CALL	ESPE3
0598    0183    0008    	RETURN
0599    0184            ESPE3:
0600    0184    0BD2    	DECFSZ	COUNTERc,0X01
0601    0185    2984    	GOTO	ESPE3
0602    0186    0008    	RETURN	
0603    0187            
0604    0187            case0
0605    0187    1485        bsf PORTA, 1
0606    0188    1505        bsf PORTA, 2
0607    0189    1585        bsf PORTA, 3
0608    018A    1605        bsf PORTA, 4
0609    018B    1685        bsf PORTA, 5
0610    018C    1409        bsf PORTE, 0
0611    018D    1089        bcf PORTE, 1
0612    018E    0008        return 
0613    018F            case1
0614    018F                ;movlw 0x0
0615    018F    1085        bcf PORTA, 1
0616    0190    1205        bcf PORTA, 4
0617    0191    1285        bcf PORTA, 5
0618    0192    1009        bcf PORTE, 0
0619    0193    1089        bcf PORTE, 1
0620    0194                ;movlw 0x1
0621    0194    1505        bsf PORTA, 2
0622    0195    1585        bsf PORTA, 3
0623    0196    0008        return
0624    0197            case2
0625    0197                ;movlw 0x1
0626    0197    1485        bsf PORTA, 1
0627    0198    1505        bsf PORTA, 2
0628    0199    1605        bsf PORTA, 4
0629    019A    1685        bsf PORTA, 5
0630    019B    1489        bsf PORTE, 1
0631    019C                ;movlw 0x0
0632    019C    1185        bcf PORTA, 3
0633    019D    1009        bcf PORTE, 0
0634    019E    0008        return
0635    019F            case3
0636    019F                ;movlw 0x1
0637    019F    1485        bsf PORTA, 1
0638    01A0    1505        bsf PORTA, 2
0639    01A1    1585        bsf PORTA, 3
0640    01A2    1605        bsf PORTA, 4
0641    01A3    1489        bsf PORTE, 1
0642    01A4                ;movlw 0x0
0643    01A4    1009        bcf PORTE, 0
0644    01A5    1285        bcf PORTA, 5
0645    01A6    0008        return
0646    01A7            case4
0647    01A7                ;movlw 0x1
0648    01A7    1505        bsf PORTA, 2
0649    01A8    1585        bsf PORTA, 3
0650    01A9    1409        bsf PORTE, 0
0651    01AA    1489        bsf PORTE, 1
0652    01AB                ;movlw 0x0
0653    01AB    1085        bcf PORTA, 1
0654    01AC    1205        bcf PORTA, 4
0655    01AD    1285        bcf PORTA, 5
0656    01AE    0008        return
0657    01AF            case5
0658    01AF                ;movlw 0x1
0659    01AF    1585        bsf PORTA, 3
0660    01B0    1605        bsf PORTA, 4
0661    01B1    1409        bsf PORTE, 0
0662    01B2    1489        bsf PORTE, 1
0663    01B3    1485        bsf PORTA, 1
0664    01B4                ;movlw 0x0
0665    01B4    1285        bcf PORTA, 5
0666    01B5    1105        bcf PORTA, 2
0667    01B6    0008        return
0668    01B7            case6
0669    01B7                ;movlw 0x1
0670    01B7    1585        bsf PORTA, 3
0671    01B8    1605        bsf PORTA, 4
0672    01B9    1685        bsf PORTA, 5
0673    01BA    1409        bsf PORTE, 0
0674    01BB    1489        bsf PORTE, 1
0675    01BC    1485        bsf PORTA, 1
0676    01BD                ;movlw 0x0
0677    01BD    1105        bcf PORTA, 2
0678    01BE    0008        return
0679    01BF            case7
0680    01BF                ;movlw 0x1
0681    01BF    1485        bsf PORTA, 1
0682    01C0    1505        bsf PORTA, 2
0683    01C1    1585        bsf PORTA, 3
0684    01C2                ;movlw 0x0
0685    01C2    1205        bcf PORTA, 4
0686    01C3    1285        bcf PORTA, 5
0687    01C4    1009        bcf PORTE, 0
0688    01C5    1089        bcf PORTE, 1
0689    01C6    0008        return
0690    01C7            case8
0691    01C7                ;movlw 0x1
0692    01C7    1485        bsf PORTA, 1
0693    01C8    1505        bsf PORTA, 2
0694    01C9    1585        bsf PORTA, 3
0695    01CA    1605        bsf PORTA, 4
0696    01CB    1685        bsf PORTA, 5
0697    01CC    1409        bsf PORTE, 0
0698    01CD    1489        bsf PORTE, 1
0699    01CE    0008        return
0700    01CF            case9
0701    01CF                ;movlw 0x1
0702    01CF    1485        bsf PORTA, 1
0703    01D0    1505        bsf PORTA, 2
0704    01D1    1585        bsf PORTA, 3
0705    01D2    1605        bsf PORTA, 4
0706    01D3    1409        bsf PORTE, 0
0707    01D4    1489        bsf PORTE, 1
0708    01D5                ;movlw 0x0
0709    01D5    1285        bcf PORTA, 5
0710    01D6    0008        return
0711    01D7            
0712    01D7            END
---------------------------------------------
Number of errors = 0
